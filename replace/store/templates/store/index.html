{% extends 'store/base.html' %}
{% load static %}
{% load cart %}

{% block title %}Acceuil{% endblock %}

{% block content %}
<div class="carousel">
    <div id="carouselExampleFade" class="carousel slide carousel-fade" data-ride="carousel">
        <div class="carousel-inner">
            <div class="carousel-item active">
                <img src="{% static 'img/iphone-se-2.jpg' %}" class="d-block w-100" style="height:300px;">
            </div>
            <div class="carousel-item">
                <img src="{% static 'img/supbanner-4.png' %}" class="d-block w-100" style="height:300px">
            </div>    
        </div>
        <a class="carousel-control-prev" role="button" data-slide="prev">
            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
            <span class="sr-only">Précédent</span>
        </a>
        <a class="carousel-control-next" role="button" data-slide="next">
            <span class="carousel-control-next-icon" aria-hidden="true"></span>
            <span class="sr-only">Suivant</span>
        </a>
    </div>
</div>
<div class="container base">    
    <div class="row">
        <div class="col-sm-12 col-md-12 col-lg-4 col-xl-4">
            <div class="container bas">
                <div class="row">
                    <svg width="60px" height="60px" viewBox="0 0 16 16" class="bi bi-truck" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                        <path fill='#87cefa' fill-rule="evenodd" d="M0 3.5A1.5 1.5 0 0 1 1.5 2h9A1.5 1.5 0 0 1 12 3.5V5h1.02a1.5 1.5 0 0 1 1.17.563l1.481 1.85a1.5 1.5 0 0 1 .329.938V10.5a1.5 1.5 0 0 1-1.5 1.5H14a2 2 0 1 1-4 0H5a2 2 0 1 1-3.998-.085A1.5 1.5 0 0 1 0 10.5v-7zm1.294 7.456A1.999 1.999 0 0 1 4.732 11h5.536a2.01 2.01 0 0 1 .732-.732V3.5a.5.5 0 0 0-.5-.5h-9a.5.5 0 0 0-.5.5v7a.5.5 0 0 0 .294.456zM12 10a2 2 0 0 1 1.732 1h.768a.5.5 0 0 0 .5-.5V8.35a.5.5 0 0 0-.11-.312l-1.48-1.85A.5.5 0 0 0 13.02 6H12v4zm-9 1a1 1 0 1 0 0 2 1 1 0 0 0 0-2zm9 0a1 1 0 1 0 0 2 1 1 0 0 0 0-2z"/>
                    </svg>
                    <p class="col-9"><span class="font">Livraison Gratuite</span><br>Commande de plus de 100€</p>
                </div>
            </div>
        </div>
        <div class="col-sm-12 col-md-12 col-lg-4 col-xl-4">
            <div class="container bas">
                <div class="row">
                    <svg width="60px" height="60px" viewBox="0 0 16 16" class="bi bi-cash" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                        <path fill='#87cefa' fill-rule="evenodd" d="M15 4H1v8h14V4zM1 3a1 1 0 0 0-1 1v8a1 1 0 0 0 1 1h14a1 1 0 0 0 1-1V4a1 1 0 0 0-1-1H1z"/>
                        <path fill='#87cefa' d="M13 4a2 2 0 0 0 2 2V4h-2zM3 4a2 2 0 0 1-2 2V4h2zm10 8a2 2 0 0 1 2-2v2h-2zM3 12a2 2 0 0 0-2-2v2h2zm7-4a2 2 0 1 1-4 0 2 2 0 0 1 4 0z"/>
                    </svg>
                    <p class="col-9"><span class="font">Remboursement</span><br>Dans une période de 14 jours</p>
                </div>
            </div>
        </div>
        <div class="col-sm-12 col-md-12 col-lg-4 col-xl-4">
            <div class="container bas">
                <div class="row">
                    <div class="d-inline-block">
                        <svg width="60px" height="60px" viewBox="0 0 16 16" class="bi bi-headset" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                            <path fill='#87cefa' fill-rule="evenodd" d="M8 1a5 5 0 0 0-5 5v4.5H2V6a6 6 0 1 1 12 0v4.5h-1V6a5 5 0 0 0-5-5z"/>
                            <path fill='#87cefa' d="M11 8a1 1 0 0 1 1-1h2v4a1 1 0 0 1-1 1h-1a1 1 0 0 1-1-1V8zM5 8a1 1 0 0 0-1-1H2v4a1 1 0 0 0 1 1h1a1 1 0 0 0 1-1V8z"/>
                            <path fill='#87cefa' fill-rule="evenodd" d="M13.5 8.5a.5.5 0 0 1 .5.5v3a2.5 2.5 0 0 1-2.5 2.5H8a.5.5 0 0 1 0-1h3.5A1.5 1.5 0 0 0 13 12V9a.5.5 0 0 1 .5-.5z"/>
                            <path fill='#87cefa' d="M6.5 14a1 1 0 0 1 1-1h1a1 1 0 1 1 0 2h-1a1 1 0 0 1-1-1z"/>
                        </svg>
                    </div>
                    <div class="inline-block">
                        <p class="col-9"><span class="font">Support</span><br>
                            Heures:8h-23h
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="container">
    <div class="h5 mb-n4" id="new">Nouvelle arrivage</div>
    <ul class="nav nav-tabs justify-content-end" id="myTab" role="tablist">
        <li class="nav-item">
            <a class="nav-link active" id="home-tab" data-toggle="tab" href="#home" role="tab" aria-controls="home" aria-selected="true">Meilleur vente</a>
        </li>
        <li class="nav-item">
            <a class="nav-link" id="profile-tab" data-toggle="tab" href="#profile" role="tab" aria-controls="profile" aria-selected="false">Nouveau</a>
        </li>
    </ul>
    <div class="tab-content mt-4" id="myTabContent">
        <div class="tab-pane fade show active" id="home" role="tabpanel" aria-labelledby="home-tab">
            <div class="row">
                {% for best in bests %}
                <div class="col-sm-6 col-md-4 col-lg-4 col-xl-4 mx-auto" id="{{best.id}}">
                    <div class="card mb-3" style="width: 16rem; border: 0px;">
                        <a href="/boutique/detail/{{ best.name|index_search }}">
                            <div id="carouselExampleIndicators" class="carousel slide" data-ride="carousel">
                                <div class="carousel-inner">
                                    <div class="carousel-item active">
                                        <img src="{{best.name.image_1.url}}" class="card-img-top" style="height: 250px;">
                                    </div>
                                    {% if best.image_2 %}
                                    <div class="carousel-item">
                                        <img src="{{best.name.image_2.url}}" class="card-img-top" style="height: 250px;">
                                    </div>
                                    {% endif %}
                                </div>
                                <a class="carousel-control-prev" role="button" data-slide="prev">
                                    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                                    <span class="sr-only">Previous</span>
                                </a>
                                <a class="carousel-control-next" role="button" data-slide="next">
                                    <span class="carousel-control-next-icon" aria-hidden="true"></span>
                                    <span class="sr-only">Next</span>
                                </a>
                            </div>
                        </a>
                        <div class="card-body">
                            <h6 class="h6" style="font-size: 14px;">{{best.name}}</h6>
                            <p class="card-text" style="font-size: 17px;"><strong>{{best.name.prix}} €</strong> <del class="ml-3">{{ best.name.prix|reduce }} €</del> </p>
                                <div class="card-footer p-0 row no-gutters">
                                    {% if best.name|is_in_cart:request.session.cart %}
                                    <div class="row no-gutters col-12">
                                        <form action="#{{best.id}}" method="post" class='col-2'>
                                            {% csrf_token %}
                                            <input hidden type="text" name='product' value='{{best.name.id}}'>
                                            <input hidden type="text" name='remove' value='True'>
                                            <input type="submit" value="-" class="btn btn-block btn-light">
                                        </form>
                                        <div class="text-center col">{{ best.name|cart_quantity:request.session.cart }} dans le panier</div>
                                        <form action="#{{best.id}}" method="post" class='col-2'>
                                            {% csrf_token %}
                                            <input hidden type="text" name='product' value='{{best.name.id}}'>
                                            <input type="submit" value="+" class="btn btn-block btn-light">
                                        </form>
                                    </div>
                                    {% else %}
                                    <form action="#{{best.id}}" method="post" class="btn-block">
                                        {% csrf_token %}
                                        <input hidden type="text" name='product' value='{{best.name.id}}'>
                                        <button type="submit" class="btn btn-info form-control p-1 col-12">Ajouter au Panier</button>
                                    </form>
                                    {% endif %}
                                </div>
                        </div>
                    </div>
                </div>
                {% endfor %}
            </div>
        </div>
        <div class="tab-pane fade" id="profile" role="tabpanel" aria-labelledby="profile-tab">
            <div class="row">
                {% for new in news %}
                <div class="col-sm-6 col-md-4 col-lg-4 col-xl-4 mx-auto" id="{{new.id}}">
                    <div class="card mb-3" style="width: 16rem; border: 0px;">
                        <a href="/boutique/detail/{{ new.name|index_search }}">
                            <div id="carouselExampleIndicators" class="carousel slide" data-ride="carousel">
                                <div class="carousel-inner">
                                    <div class="carousel-item active">
                                        <img src="{{new.name.image_1.url}}" class="card-img-top" style="height: 250px;">
                                    </div>
                                    {% if new.image_2 %}
                                    <div class="carousel-item">
                                        <img src="{{new.name.image_2.url}}" class="card-img-top" style="height: 250px;">
                                    </div>
                                    {% endif %}
                                </div>
                                <a class="carousel-control-prev" role="button" data-slide="prev">
                                    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                                    <span class="sr-only">Previous</span>
                                </a>
                                <a class="carousel-control-next" role="button" data-slide="next">
                                    <span class="carousel-control-next-icon" aria-hidden="true"></span>
                                    <span class="sr-only">Next</span>
                                </a>
                            </div>
                        </a>
                        <div class="card-body">
                            <h6 class="h6" style="font-size: 14px;">{{new.name}}</h5>
                            <p class="card-text" style="font-size: 17px;"><strong>{{new.name.prix}} €</strong> <del class="ml-3">{{ new.name.prix|reduce }} €</del> </p>
                                <div class="card-footer p-0 row no-gutters">
                                    {% if new.name|is_in_cart:request.session.cart %}
                                    <div class="row no-gutters col-12">
                                        <form action="#{{new.id}}" method="post" class='col-2'>
                                            {% csrf_token %}
                                            <input hidden type="text" name='product' value='{{new.name.id}}'>
                                            <input hidden type="text" name='remove' value='True'>
                                            <input type="submit" value="-" class="btn btn-block btn-light">
                                        </form>
                                        <div class="text-center col">{{ new.name|cart_quantity:request.session.cart }} dans le panier</div>
                                        <form action="#{{new.id}}" method="post" class='col-2'>
                                            {% csrf_token %}
                                            <input hidden type="text" name='product' value='{{new.name.id}}'>
                                            <input type="submit" value="+" class="btn btn-block btn-light">
                                        </form>
                                    </div>
                                    {% else %}
                                    <form action="#{{new.id}}" method="post" class="btn-block">
                                        {% csrf_token %}
                                        <input hidden type="text" name='product' value='{{new.name.id}}'>
                                        <button type="submit" class="btn btn-info form-control p-1 col-12">Ajouter au Panier</button>
                                    </form>
                                    {% endif %}
                                </div>
                        </div>
                    </div>
                </div>
                {% endfor %}
            </div>
        </div>
      </div>
    </div>
</div>
<style>
    @media(max-width: 400px){
        #new{
            display: none;
        }
    }
</style>
{% endblock %}